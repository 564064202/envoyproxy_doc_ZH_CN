### 熔断

熔断是分布式系统的重要组成部分。快速失败并尽快给下游施加压力，几乎总是好的。这是Envoy网格的主要优点之一，Envoy在网络级别实现强制断路限制，而不必独立配置和编写每个应用程序。Envoy支持各种类型的完全分布（不协调）的熔断：

- **群集最大连接数**：Envoy将为上游群集中的所有主机建立的最大连接数。实际上，这仅适用于HTTP/1.1群集，因为HTTP/2使用到每个主机的单个连接。
- **群集最大挂起请求数**：在等待就绪连接池连接时将排队的最大请求数。实际上，这仅适用于HTTP/1.1群集，因为HTTP/2连接池不会排队请求。HTTP/2请求立即复用。如果这个断路器溢出，集群的`upstream_rq_pending_overflow`计数器将增加。
- **群集最大请求数**：在任何给定时间，群集中所有主机可以处理的最大请求数。实际上，这适用于HTTP/2群集，因为HTTP/1.1群集由最大连接断路器控制。如果这个断路器溢出，集群的`upstream_rq_pending_overflow`计数器将增加。
- **集群最大活动重试次数**：在任何给定时间，集群中所有主机可以执行的最大重试次数。一般来说，我们建议积极进行断路重试，以便允许零星故障重试，但整体重试量不能爆炸并导致大规模级联故障。如果这个断路器溢出，集群的`upstream_rq_retry_overflow`计数器将递增。

每个熔断阈值可以按照每个上游集群和每个优先级进行配置和跟踪。这允许分布式系统的不同组件被独立地调整并且具有不同的熔断配置。

</br>
请注意，在HTTP请求的情况下，断路将导致`x-envoy-overloaded`报文头被路由过滤器设置。


### 返回
- [架构介绍](../Architectureoverview.md)
- [简介](../../Introduction.md)
- [首页目录](../../README.md)
