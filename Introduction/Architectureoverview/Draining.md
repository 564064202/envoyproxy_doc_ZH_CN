### 退出

退出是指Envoy试图优雅让连接退出各种事件的过程。退出发生在下列时刻：

- 服务器已通过健康检查失败管理端口进行手动触发失败。有关更多信息，请参阅[健康检查过滤器](Healthchecking.md)体系架构。
- 服务器正在热启动。
- 个别监听器正在通过LDS进行修改或删除。

每个配置的监听器都有一个drain_type设置，用于控制何时发生退出。目前支持的值是：

**默认：**</br>
Envoy会响应上述三种情况（管理员触发，热启动和LDS更新/删除）。这是默认设置。

**modify_only：**</br>
Envoy只会响应上述第二、三种情况（热启动和LDS更新/删除）。如果Envoy同时拥有入口和出口监听器，则此设置很有用。可能需要在出口监听器上设置modify_only，以便在尝试进行受控关闭时，依靠入口监听器退出来执行完整的服务器关闭，它们只在修改期间关闭。

请注意，虽然退出是每个监听器的概念，但它必须在网络过滤器级别上得到支持。目前唯一支持正常退出过滤器是HTTP连接管理器，Redis和Mongo。


### 返回
- [架构介绍](../Architectureoverview.md)
- [简介](../../Introduction.md)
- [首页目录](../../README.md)
